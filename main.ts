controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    current_location = tiles.locationOfSprite(mySprite)
    if (tiles.tileIs(current_location, assets.tile`myTile0`)) {
        tiles.setTileAt(current_location, assets.tile`myTile1`)
    }
})
function closeinventory () {
    in_pause_screen = false
    controller.moveSprite(mySprite, 100, 100)
}
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    selected_index = Math.max(selected_index - 1, 0)
})
function open_inventory () {
    in_pause_screen = true
    controller.moveSprite(mySprite, 0, 0)
    selected_index = 0
}
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    selected_index = Math.min(selected_index + 1, tools.length - 1)
})
controller.menu.onEvent(ControllerButtonEvent.Pressed, function () {
    if (in_pause_screen) {
        closeinventory()
    } else {
        open_inventory()
    }
})
spriteutils.createRenderable(100, function (screen2) {
    if (in_pause_screen) {
        screen2.fillRect(10, 10, 140, 100, 13)
        screen2.drawRect(10, 10, 140, 100, 14)
        images.print(screen2, "Invetory", 14, 14, 14)
        images.print(screen2, tool_names[selected_index], 76, 14, 14)
        screen2.fillRect(14, 25, 132, 2, 14)
        tool_top = 28
        for (let index = 0; index <= tools.length - 1; index++) {
            spriteutils.drawTransparentImage(tools[index], screen2, 14 + index * 20, tool_top)
            spriteutils.drawTransparentImage(assets.image`selector`, screen2, 14 + selected_index * 20 - 2, tool_top - 2)
        }
    }
})
let tool_top = 0
let selected_index = 0
let in_pause_screen = false
let current_location: tiles.Location = null
let tool_names: string[] = []
let tools: Image[] = []
let mySprite: Sprite = null
tiles.setCurrentTilemap(tilemap`level2`)
scene.setBackgroundImage(img`
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    `)
mySprite = sprites.create(img`
    b b b b b b b b b b b b b b b b 
    b b b b b b b b b b b b b b b b 
    b b b b b b b b b b b b b b b b 
    b b 1 1 1 1 1 b b 1 1 1 1 1 b b 
    b b 1 f f f 1 b b 1 f f f 1 b b 
    b b 1 f f f 1 b b 1 f f f 1 b b 
    b b 1 f f f 1 b b 1 f f f 1 b b 
    b b 1 1 1 1 1 b b 1 1 1 1 1 b b 
    b b b b b b b b b b b b b b b b 
    b b b b b f f f f f b b b b b b 
    b b b b b f 2 2 2 f b b b b b b 
    b b b b b f 2 2 2 f b b b b b b 
    b b b b b f 3 3 3 f b b b b b b 
    b b b b b f f f f f b b b b b b 
    b b b b b b b b b b b b b b b b 
    b b b b b b b b b b b b b b b b 
    `, SpriteKind.Player)
controller.moveSprite(mySprite)
scene.cameraFollowSprite(mySprite)
tiles.placeOnRandomTile(mySprite, assets.tile`myTile2`)
color.startFade(color.GrayScale, color.originalPalette)
tiles.coverAllTiles(assets.tile`myTile2`, assets.tile`myTile`)
tools = [
img`
    . 4 4 4 4 . . . . . . . . . . . 
    4 . . . . 4 . . . . . . . . . . 
    4 . . . . . 4 . . . . . . . . . 
    4 . 4 4 4 4 4 4 4 4 4 4 . . . . 
    e . 4 4 4 4 4 4 4 4 4 4 . . . 4 
    e . 4 4 4 4 4 4 4 4 4 4 . 4 4 4 
    . e 4 4 4 4 4 4 4 4 4 4 . 4 4 4 
    . . 4 4 4 4 4 4 4 4 4 4 4 4 e 4 
    . . 4 4 4 4 4 4 4 4 4 4 4 e . e 
    . . 4 4 4 4 4 4 4 4 4 4 e . . . 
    . . e 4 4 4 4 4 4 4 4 4 . . . . 
    . . e 4 4 4 4 4 4 4 4 4 . . . . 
    . . e 4 4 4 4 4 4 4 4 4 . . . . 
    . . e 4 4 4 4 4 4 4 4 4 . . . . 
    . . e e e e e e e 4 4 4 . . . . 
    . . . . . . . . . . . . . . . . 
    `,
img`
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . 6 6 6 6 . . . . . . 
    . . . . . . 6 6 6 6 . . . . . . 
    . . . . . . 6 6 6 6 . . . . . . 
    . . . . . . . . 6 . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . 6 . . . . . . . 
    . . . . . . 6 6 6 6 . . . . . . 
    . . . . . . 6 6 6 6 . . . . . . 
    . . . . . . 6 6 6 6 . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `,
img`
    . . . . . . . . . . . . . . . . 
    . b b . . . . . . . . . . . . . 
    . b b e . . . . . . . . . . . . 
    . . e e e . . . . . . . . . . . 
    . . . e e e . . . . . . . . . . 
    . . . . e e e . . . . . . . . . 
    . . . . . e e e . . . . . . . . 
    . . . . . . e e e . . . . . . . 
    . . . . . . . e e e . . . . . . 
    . . . . . . . . e e e . b b . . 
    . . . . . . . . . e e b b b b . 
    . . . . . . . . . . b b b b b b 
    . . . . . . . . . b b b b b b b 
    . . . . . . . . . b b b b b b b 
    . . . . . . . . . . b b b b b b 
    . . . . . . . . . . . b b b b . 
    `,
img`
    . . . . . . . . . . . . . . . . 
    . . . . . . e e e . . . . . . . 
    . b b b b b b b e b b . . . . . 
    . . b b b b b b e b b . . . . . 
    . . . . . . e e e . . . . . . . 
    . . . . . . e e e e . . . . . . 
    . . . . . . . e e e . . . . . . 
    . . . . . . . e e e . . . . . . 
    . . . . . . . . e e . . . . . . 
    . . . . . . . . e e e . . . . . 
    . . . . . . . . e e e . . . . . 
    . . . . . . . . . e e . . . . . 
    . . . . . . . . . e e e . . . . 
    . . . . . . . . . . e e . . . . 
    . . . . . . . . . . e e . . . . 
    . . . . . . . . . . e e e . . . 
    `
]
tool_names = [
"watering can",
"gloves",
"shovel",
"hoe"
]
